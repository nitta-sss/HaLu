{% load static %}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Halu UI</title>
    <link rel="stylesheet" href="{% static 'CSS/style.css' %}">
</head>
<body>

  <div class="header">
    <div class="user-box">
    <div class="icon"><img src="{% static 'img/face.png' %}" class="face-img"></div>
    <span class="username">Halu</span>
    <button id="toggle-btn">ã‚²ãƒ¼ã‚¸éè¡¨ç¤º</button>  
</div>

  </div>

  <div class="container">

    <!-- â˜…â˜…â˜… å·¦ã‚¨ãƒªã‚¢ â˜…â˜…â˜… -->
    <div class="left-area">
        <div class="chat-box">
        {% for msg in messages %}
            <div class="balloon {{ msg.sender }}">
                {{ msg.text }}
            </div>
        {% endfor %}
        </div>

        <div class="speak-icon">
            ğŸ—£
        </div>
    </div>


    <!-- â˜…â˜…â˜… å³ã‚¨ãƒªã‚¢ â˜…â˜…â˜… -->
    <div class="right-area">
        <!-- èƒŒæ™¯ç”»åƒï¼‹ãƒ©ã‚¤ãƒˆã¯CSSã§è¨­å®š -->
        <img src="{% static 'img/windows.jpg' %}" class="right-back">

        <div class="face-area">
            <img src="{% static 'img/HaLu_Face.png' %}" class="face-img">
        </div>
      
        

        <!-- æ„Ÿæƒ…ã‚²ãƒ¼ã‚¸ -->
        <div class="emotion-area fade" id="emotionArea">

            <div class="bar-item" class="fade show">
                <div class="bar-label">è¦šé†’åº¦</div>
                <div class="bar-base">
                    <div class="bar-fill fill1" id="awakeBar"></div>
                </div>
            </div>
            
            <div class="bar-item">
                <div class="bar-label">å¿«æ¥½åº¦</div>
                <div class="bar-base" class="fade show">
                    <div class="bar-fill fill2" id="pleasureBar"></div>
                </div>
            </div>

        </div>

    </div>

</div>
<script>
document.addEventListener("DOMContentLoaded", function () {

    const awakeBar = document.getElementById("awakeBar");
    const pleasureBar = document.getElementById("pleasureBar");

    let emotion = {
        x: 20,
        y: 80
    };

    function updateGauge() {
        awakeBar.style.width = emotion.x + "%";
        pleasureBar.style.width = emotion.y + "%";
        updateGaugeColors(emotion.x, emotion.y);
    }

    updateGauge();

    setInterval(function () {
        emotion.x = Math.floor(Math.random() * 101);
        emotion.y = Math.floor(Math.random() * 101);
        updateGauge();
    }, 3000);

    /* â˜… è‰²å¤‰åŒ–ã®é–¢æ•° â˜… */
    function updateGaugeColors(x, y) {

        /* --- è¦šé†’åº¦ï¼šèµ¤â†’ã‚ªãƒ¬ãƒ³ã‚¸â†’é»„ --- */
        let v1 = x / 100;
    let r1 = Math.round(255 * v1);
    let b1 = Math.round(255 * (1 - v1));
    let color1 = `rgb(${r1}, 0, ${b1})`;

    awakeBar.style.background = `linear-gradient(to right, ${color1}, #ffffff60)`;


    /* --- å¿«æ¥½åº¦ï¼ˆâ˜…èµ¤â†’ã‚ªãƒ¬ãƒ³ã‚¸â†’é»„ï¼‰ --- */
    if (y < 30) {
        pleasureBar.style.background = "linear-gradient(to right, red, orange)";
    } else if (y < 70) {
        pleasureBar.style.background = "linear-gradient(to right, orange, yellow)";
    } else {
        pleasureBar.style.background = "linear-gradient(to right, yellow, lightyellow)";
    }
}

    /* â–¼â–¼ ã‚²ãƒ¼ã‚¸è¡¨ç¤º/éè¡¨ç¤ºãƒœã‚¿ãƒ³ â–¼â–¼ */
    const btn = document.getElementById("toggle-btn");
    const gauge = document.getElementById("emotionArea");

    btn.addEventListener("click", function () {
        gauge.classList.toggle("hide");
        btn.textContent = gauge.classList.contains("hide") ? "ã‚²ãƒ¼ã‚¸è¡¨ç¤º" : "ã‚²ãƒ¼ã‚¸éè¡¨ç¤º";
    });

});  
</script>


    

</body>
</html>
